@use "sass:string";


// print the css class for each font family and it's font weights.
@mixin printClasses($printClasses, $classPrefix, $weight) {
  $fontNamesAndWeights: (
    font-thin:    100,
    font-lighter: 200,
    font-light:   300,
    font-normal:  400,
    font-medium:  500,
    font-bold:    600,
    font-bolder:  700,
    font-black:   800,
    font-blacker: 900
  );

  @if $printClasses == true {
    @each $className, $fontWeight in $fontNamesAndWeights {
      @if $weight == $fontWeight {
        .#{$classPrefix}-#{$className} {
          font-weight: $weight;
        }
      }
    }
    
  }
}


// return some props to not repeat them on fontface function.
@mixin src($family, $folder, $weight, $suffixs, $path){
  $src: null;

  @each $suffix in $suffixs {
    $mod: suffixMods($family, $suffix);
    $format: suffixFormats($suffix);
    $src: append($src, url(debugPath($path) + debugFolder($folder) + $family + debugWeight($weight) + "." + $mod) format("#{$format}"), comma);
  }

  // output
  src: $src;
}


@mixin executeOptionalMap($optionalMap) {
  @if isValid($optionalMap) {
    @each $key, $value in $optionalMap {
      $key: string.unquote($key);
      $value: string.unquote($value);

      // output
      #{$key}: #{$value};
    }
  }
}


@mixin executeFontFace($weights, $family, $folder, $suffixs, $path, $optionalMap, $printClasses, $classPrefix) {
  @if type-of($weights) == list {
    
    @each $weight in $weights {
      @font-face {
        font-family: $family;
        font-weight: $weight;
        @include src($family, $folder, $weight, $suffixs, $path);
        @include executeOptionalMap($optionalMap);
      }
      @include printClasses($printClasses, $classPrefix, $weight);
    }/// each

  } @else if type-of($weights) != list {
    $weight: $weights;

    @font-face {
      font-family: $family;
      font-weight: $weight;
      @include src($family, $folder, $weight, $suffixs, $path);
      @include executeOptionalMap($optionalMap);
    }

    @include printClasses($printClasses, $classPrefix, $weight);
    
  }/// elseif
}